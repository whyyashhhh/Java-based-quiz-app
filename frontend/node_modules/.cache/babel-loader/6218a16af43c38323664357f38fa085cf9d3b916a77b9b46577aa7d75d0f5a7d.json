{"ast":null,"code":"import _objectSpread from\"C:/Users/tsuya/OneDrive/Desktop/java mini project/quiz-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useEffect,useState}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import Header from'../components/Header';import QuestionCard from'../components/QuestionCard';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Quiz(){const{category}=useParams();const navigate=useNavigate();const[questions,setQuestions]=useState([]);const[answers,setAnswers]=useState({});useEffect(()=>{fetch(\"/api/quiz/\".concat(category)).then(res=>res.json()).then(setQuestions).catch(err=>console.error(err));},[category]);const onSelect=(questionId,optionIndex)=>{setAnswers(s=>_objectSpread(_objectSpread({},s),{},{[questionId]:optionIndex}));};const submitQuiz=async()=>{const payload=Object.entries(answers).map(_ref=>{let[question,answer]=_ref;return{question,answer};});const res=await fetch(\"/api/quiz/submit\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(payload)});const result=await res.json();navigate(\"/result\",{state:result});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"main\",{className:\"main centered\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"mb-4\",children:[\"Category: \",category]}),questions.length===0&&/*#__PURE__*/_jsx(\"p\",{className:\"muted\",children:\"Loading questions...\"}),questions.map((q,i)=>{var _answers$q$question;return/*#__PURE__*/_jsx(QuestionCard,{index:i,question:q,selected:(_answers$q$question=answers[q.question])!==null&&_answers$q$question!==void 0?_answers$q$question:answers[q.id],onSelect:optIdx=>{var _q$question;return onSelect((_q$question=q.question)!==null&&_q$question!==void 0?_q$question:q.id,optIdx);}},q.id||i);}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:16},children:/*#__PURE__*/_jsx(\"button\",{onClick:submitQuiz,className:\"btn-primary\",children:\"Submit Quiz\"})})]})]});}","map":{"version":3,"names":["useEffect","useState","useParams","useNavigate","Header","QuestionCard","jsx","_jsx","jsxs","_jsxs","Quiz","category","navigate","questions","setQuestions","answers","setAnswers","fetch","concat","then","res","json","catch","err","console","error","onSelect","questionId","optionIndex","s","_objectSpread","submitQuiz","payload","Object","entries","map","_ref","question","answer","method","headers","body","JSON","stringify","result","state","children","className","length","q","i","_answers$q$question","index","selected","id","optIdx","_q$question","style","marginTop","onClick"],"sources":["C:/Users/tsuya/OneDrive/Desktop/java mini project/quiz-app/frontend/src/pages/Quiz.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport Header from '../components/Header';\r\nimport QuestionCard from '../components/QuestionCard';\r\n\r\nexport default function Quiz() {\r\n  const { category } = useParams();\r\n  const navigate = useNavigate();\r\n  const [questions, setQuestions] = useState([]);\r\n  const [answers, setAnswers] = useState({});\r\n\r\n  useEffect(() => {\r\n    fetch(`/api/quiz/${category}`)\r\n      .then((res) => res.json())\r\n      .then(setQuestions)\r\n      .catch((err) => console.error(err));\r\n  }, [category]);\r\n\r\n  const onSelect = (questionId, optionIndex) => {\r\n    setAnswers((s) => ({ ...s, [questionId]: optionIndex }));\r\n  };\r\n\r\n  const submitQuiz = async () => {\r\n    const payload = Object.entries(answers).map(([question, answer]) => ({ question, answer }));\r\n    const res = await fetch(\"/api/quiz/submit\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(payload),\r\n    });\r\n    const result = await res.json();\r\n    navigate(\"/result\", { state: result });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Header />\r\n      <main className=\"main centered\">\r\n        <h2 className=\"mb-4\">Category: {category}</h2>\r\n\r\n        {questions.length === 0 && <p className=\"muted\">Loading questions...</p>}\r\n\r\n        {questions.map((q, i) => (\r\n          <QuestionCard\r\n            key={q.id || i}\r\n            index={i}\r\n            question={q}\r\n            selected={answers[q.question] ?? answers[q.id]}\r\n            onSelect={(optIdx) => onSelect(q.question ?? q.id, optIdx)}\r\n          />\r\n        ))}\r\n\r\n        <div style={{marginTop:16}}>\r\n          <button onClick={submitQuiz} className=\"btn-primary\">\r\n            Submit Quiz\r\n          </button>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}